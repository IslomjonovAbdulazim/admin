import{r as h,f as we,t as v,j as e,e as L,B as k,c as oe,o as V,h as ke,n as B,s as q,i as Se,_ as ne}from"./index-C2efy-H1.js";import{C as O,a as $,b as G,c as z,d as H,u as _e}from"./card-C7FjlU42.js";import{H as Pe,S as Le,T as De,C as Fe,P as Me}from"./config-drawer-k-4Ro-99.js";import{T as Te,M as Ee}from"./top-nav-b8bDTZzJ.js";import{c as R,a as P,u as Ue,d as Ie,P as ce,f as Re,h as Ae}from"./Combination-e_ExlZZi.js";import{u as M,T as Be,a as Oe,b as re,c as S,d as $e,e as _,E as Ge,S as ze,f as He,F as de,g,h as j,i as f,j as b,k as y,l as me,L as X}from"./form-BA3A6ChG.js";import{B as ie}from"./badge-D2ECJKXf.js";import{A as J,n as W,o as K,U as qe,H as Je,R as We,D as Ke,e as Qe,f as Ve,g as Xe,i as I,h as Ze,G as Ye,I as Z,J as Y,K as ee,M as se,N as ae,O as te,X as es}from"./sign-out-dialog-C7VDqJG5.js";import{u as he,a as ue,I as w}from"./label-Di6lIgUh.js";import{u as ss}from"./index-DM0Fh7Vv.js";import{I as le}from"./image-BrbwpHny.js";import{P as as}from"./plus-NORMyrox.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],F=R("building-2",ts);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],rs=R("toggle-left",ns);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],ls=R("toggle-right",is);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Q=R("upload",os),D={list:async t=>{const l=new URLSearchParams;t?.skip!==void 0&&l.set("skip",t.skip.toString()),t?.limit!==void 0&&l.set("limit",t.limit.toString());const n=`/api/v1/super-admin/learning-centers?${l.toString()}`;console.log("ðŸš€ Fetching Learning Centers from Backend:",{url:`https://edutizimbackend-production.up.railway.app${n}`,params:t,timestamp:new Date().toISOString()});const o=await P.get(n);return console.log("âœ… Learning Centers Response:",{status:o.status,dataCount:o.data?.length||0,data:o.data,timestamp:new Date().toISOString()}),o.data},create:async t=>(await P.post("/api/v1/super-admin/learning-centers",t)).data,update:async(t,l)=>(await P.put(`/api/v1/super-admin/learning-centers/${t}`,l)).data,uploadLogo:async(t,l)=>{const n=new FormData;return n.append("file",l),(await P.post(`/api/v1/super-admin/learning-centers/${t}/logo`,n,{headers:{"Content-Type":"multipart/form-data"}})).data},togglePayment:async t=>(await P.post(`/api/v1/super-admin/learning-centers/${t}/toggle-payment`)).data,deactivate:async t=>(await P.delete(`/api/v1/super-admin/learning-centers/${t}`)).data},cs="https://edutizimbackend-production.up.railway.app",xe=t=>{if(t)return`${cs}/static/${t}`};function ds({data:t,isLoading:l,onEdit:n,onUploadLogo:o,onRefresh:i}){const[d,r]=h.useState(!1),[a,c]=h.useState(null),x=we(),u=M({mutationFn:s=>D.togglePayment(s),onSuccess:s=>{v.success(s.message),x.invalidateQueries({queryKey:["learning-centers"]}),i()},onError:s=>{v.error("Failed to toggle payment status"),console.error("Toggle payment error:",s)}}),N=M({mutationFn:s=>D.deactivate(s),onSuccess:s=>{v.success(s.message),x.invalidateQueries({queryKey:["learning-centers"]}),i(),r(!1),c(null)},onError:s=>{v.error("Failed to deactivate learning center"),console.error("Delete error:",s)}}),C=s=>{u.mutate(s.id)},p=s=>{c(s),r(!0)},m=()=>{a&&N.mutate(a.id)};return l?e.jsxs(O,{children:[e.jsxs($,{children:[e.jsx(G,{children:"Learning Centers"}),e.jsx(z,{children:"Loading..."})]}),e.jsx(H,{children:e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})]}):t.length===0?e.jsxs(O,{children:[e.jsxs($,{children:[e.jsx(G,{children:"Learning Centers"}),e.jsx(z,{children:"No learning centers found"})]}),e.jsx(H,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[e.jsx(F,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsxs("p",{className:"text-muted-foreground text-center",children:["No learning centers have been created yet.",e.jsx("br",{}),'Click "Add Learning Center" to get started.']})]})})]}):e.jsxs(e.Fragment,{children:[e.jsxs(O,{className:"border-0 shadow-lg bg-gradient-to-br from-card via-card to-card/95",children:[e.jsx($,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(G,{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5 text-primary"}),"Learning Centers (",t.length,")"]}),e.jsx(z,{className:"mt-1",children:"Comprehensive management of educational institutions"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Active"}),e.jsx("div",{className:"text-2xl font-bold text-primary",children:t.filter(s=>s.is_active).length})]})]})}),e.jsx(H,{children:e.jsxs(Be,{children:[e.jsx(Oe,{children:e.jsxs(re,{children:[e.jsx(S,{children:"Center"}),e.jsx(S,{children:"Contact"}),e.jsx(S,{children:"Limits"}),e.jsx(S,{children:"Status"}),e.jsx(S,{children:"Payment"}),e.jsx(S,{children:"Created"}),e.jsx(S,{className:"w-[70px]",children:"Actions"})]})}),e.jsx($e,{children:t.map(s=>e.jsxs(re,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(J,{className:"h-10 w-10",children:[e.jsx(W,{src:xe(s.logo),alt:s.name}),e.jsx(K,{children:e.jsx(F,{className:"h-4 w-4"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID: ",s.id]})]})]})}),e.jsx(_,{children:e.jsx("div",{className:"text-sm",children:s.phone})}),e.jsx(_,{children:e.jsxs("div",{className:"flex flex-col space-y-1 text-xs",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(qe,{className:"h-3 w-3"}),e.jsxs("span",{children:[s.student_limit," students"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Je,{className:"h-3 w-3"}),e.jsxs("span",{children:[s.teacher_limit," teachers"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(We,{className:"h-3 w-3"}),e.jsxs("span",{children:[s.group_limit," groups"]})]})]})}),e.jsx(_,{children:e.jsxs(ie,{variant:s.is_active?"default":"secondary",className:L("font-medium transition-all duration-200",s.is_active?"bg-emerald-100 text-emerald-700 hover:bg-emerald-200 border-emerald-200 dark:bg-emerald-900/20 dark:text-emerald-400 dark:border-emerald-800":"bg-red-100 text-red-700 hover:bg-red-200 border-red-200 dark:bg-red-900/20 dark:text-red-400 dark:border-red-800"),children:[e.jsx("div",{className:L("w-2 h-2 rounded-full mr-1",s.is_active?"bg-emerald-500":"bg-red-500")}),s.is_active?"Active":"Inactive"]})}),e.jsx(_,{children:e.jsxs(ie,{variant:s.is_paid?"default":"secondary",className:L("font-medium transition-all duration-200",s.is_paid?"bg-blue-100 text-blue-700 hover:bg-blue-200 border-blue-200 dark:bg-blue-900/20 dark:text-blue-400 dark:border-blue-800":"bg-amber-100 text-amber-700 hover:bg-amber-200 border-amber-200 dark:bg-amber-900/20 dark:text-amber-400 dark:border-amber-800"),children:[e.jsx("div",{className:L("w-2 h-2 rounded-full mr-1",s.is_paid?"bg-blue-500":"bg-amber-500")}),s.is_paid?"Paid Plan":"Free Plan"]})}),e.jsx(_,{children:e.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(s.created_at).toLocaleDateString()})}),e.jsx(_,{children:e.jsxs(Ke,{children:[e.jsx(Qe,{asChild:!0,children:e.jsxs(k,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(Ge,{className:"h-4 w-4"})]})}),e.jsxs(Ve,{align:"end",children:[e.jsx(Xe,{children:"Actions"}),e.jsxs(I,{onClick:()=>n(s),children:[e.jsx(ze,{className:"mr-2 h-4 w-4"}),"Edit"]}),e.jsxs(I,{onClick:()=>o(s),children:[e.jsx(Q,{className:"mr-2 h-4 w-4"}),"Upload Logo"]}),e.jsx(Ze,{}),e.jsxs(I,{onClick:()=>C(s),disabled:u.isPending,children:[s.is_paid?e.jsx(rs,{className:"mr-2 h-4 w-4"}):e.jsx(ls,{className:"mr-2 h-4 w-4"}),s.is_paid?"Make Free":"Make Paid"]}),e.jsxs(I,{onClick:()=>p(s),className:"text-red-600",children:[e.jsx(He,{className:"mr-2 h-4 w-4"}),"Deactivate"]})]})]})})]},s.id))})]})})]}),e.jsx(Ye,{open:d,onOpenChange:r,title:"Deactivate Learning Center",desc:`Are you sure you want to deactivate "${a?.name}"? This action cannot be undone.`,confirmText:"Deactivate",handleConfirm:m,isLoading:N.isPending})]})}var A="Switch",[ms]=Ie(A),[hs,us]=ms(A),pe=h.forwardRef((t,l)=>{const{__scopeSwitch:n,name:o,checked:i,defaultChecked:d,required:r,disabled:a,value:c="on",onCheckedChange:x,form:u,...N}=t,[C,p]=h.useState(null),m=oe(l,U=>p(U)),s=h.useRef(!1),T=C?u||!!C.closest("form"):!0,[E,Ne]=Ue({prop:i,defaultProp:d??!1,onChange:x,caller:A});return e.jsxs(hs,{scope:n,checked:E,disabled:a,children:[e.jsx(ce.button,{type:"button",role:"switch","aria-checked":E,"aria-required":r,"data-state":be(E),"data-disabled":a?"":void 0,disabled:a,value:c,...N,ref:m,onClick:Re(t.onClick,U=>{Ne(ye=>!ye),T&&(s.current=U.isPropagationStopped(),s.current||U.stopPropagation())})}),T&&e.jsx(fe,{control:C,bubbles:!s.current,name:o,value:c,checked:E,required:r,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});pe.displayName=A;var ge="SwitchThumb",je=h.forwardRef((t,l)=>{const{__scopeSwitch:n,...o}=t,i=us(ge,n);return e.jsx(ce.span,{"data-state":be(i.checked),"data-disabled":i.disabled?"":void 0,...o,ref:l})});je.displayName=ge;var xs="SwitchBubbleInput",fe=h.forwardRef(({__scopeSwitch:t,control:l,checked:n,bubbles:o=!0,...i},d)=>{const r=h.useRef(null),a=oe(r,d),c=ss(n),x=Ae(l);return h.useEffect(()=>{const u=r.current;if(!u)return;const N=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(N,"checked").set;if(c!==n&&p){const m=new Event("click",{bubbles:o});p.call(u,n),u.dispatchEvent(m)}},[c,n,o]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:a,style:{...i.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});fe.displayName=xs;function be(t){return t?"checked":"unchecked"}var ps=pe,gs=je;function ve({className:t,...l}){return e.jsx(ps,{"data-slot":"switch",className:L("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...l,children:e.jsx(gs,{"data-slot":"switch-thumb",className:L("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0 rtl:data-[state=checked]:-translate-x-[calc(100%-2px)]")})})}const Ce=V({name:q().min(2,"Name must be at least 2 characters").max(100,"Name must be less than 100 characters"),phone:q().min(10,"Phone number must be at least 10 characters").regex(/^\+?[1-9]\d{1,14}$/,"Please enter a valid phone number"),student_limit:B().min(1,"Student limit must be at least 1").max(1e4,"Student limit cannot exceed 10,000"),teacher_limit:B().min(1,"Teacher limit must be at least 1").max(1e3,"Teacher limit cannot exceed 1,000"),group_limit:B().min(1,"Group limit must be at least 1").max(1e3,"Group limit cannot exceed 1,000"),is_paid:ke()}),js=Ce.partial();V({file:Se(File).refine(t=>t.size<=5*1024*1024,"File size must be less than 5MB").refine(t=>["image/jpeg","image/jpg","image/png","image/webp"].includes(t.type),"Only JPEG, PNG, and WebP images are allowed")});V({name:q().optional(),is_paid:ne(["all","paid","unpaid"]).default("all"),is_active:ne(["all","active","inactive"]).default("all")});function fs({open:t,onOpenChange:l,onSuccess:n}){const o=he({resolver:ue(Ce),defaultValues:{name:"",phone:"",student_limit:100,teacher_limit:10,group_limit:20,is_paid:!0}}),i=M({mutationFn:D.create,onSuccess:r=>{v.success(`Learning center "${r.name}" created successfully`),o.reset(),n()},onError:r=>{v.error("Failed to create learning center"),console.error("Create learning center error:",r)}}),d=r=>{i.mutate(r)};return e.jsx(Z,{open:t,onOpenChange:l,children:e.jsxs(Y,{className:"max-w-md",children:[e.jsxs(ee,{children:[e.jsxs(se,{className:"flex items-center space-x-2",children:[e.jsx(F,{className:"h-5 w-5"}),e.jsx("span",{children:"Create Learning Center"})]}),e.jsx(ae,{children:"Add a new learning center to the system with specified limits and configuration."})]}),e.jsx(de,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(d),className:"space-y-4",children:[e.jsx(g,{control:o.control,name:"name",render:({field:r})=>e.jsxs(j,{children:[e.jsx(f,{children:"Center Name"}),e.jsx(b,{children:e.jsx(w,{placeholder:"ABC Learning Center",...r})}),e.jsx(y,{})]})}),e.jsx(g,{control:o.control,name:"phone",render:({field:r})=>e.jsxs(j,{children:[e.jsx(f,{children:"Phone Number"}),e.jsx(b,{children:e.jsx(w,{placeholder:"+998901234567",...r})}),e.jsx(y,{})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(g,{control:o.control,name:"student_limit",render:({field:r})=>e.jsxs(j,{children:[e.jsx(f,{children:"Students"}),e.jsx(b,{children:e.jsx(w,{type:"number",min:1,...r,onChange:a=>r.onChange(parseInt(a.target.value))})}),e.jsx(y,{})]})}),e.jsx(g,{control:o.control,name:"teacher_limit",render:({field:r})=>e.jsxs(j,{children:[e.jsx(f,{children:"Teachers"}),e.jsx(b,{children:e.jsx(w,{type:"number",min:1,...r,onChange:a=>r.onChange(parseInt(a.target.value))})}),e.jsx(y,{})]})}),e.jsx(g,{control:o.control,name:"group_limit",render:({field:r})=>e.jsxs(j,{children:[e.jsx(f,{children:"Groups"}),e.jsx(b,{children:e.jsx(w,{type:"number",min:1,...r,onChange:a=>r.onChange(parseInt(a.target.value))})}),e.jsx(y,{})]})})]}),e.jsx(g,{control:o.control,name:"is_paid",render:({field:r})=>e.jsxs(j,{className:"flex flex-row items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(f,{children:"Paid Subscription"}),e.jsx(me,{children:"Enable paid features for this learning center"})]}),e.jsx(b,{children:e.jsx(ve,{checked:r.value,onCheckedChange:r.onChange})})]})}),e.jsxs(te,{children:[e.jsx(k,{type:"button",variant:"outline",onClick:()=>l(!1),disabled:i.isPending,children:"Cancel"}),e.jsxs(k,{type:"submit",disabled:i.isPending,children:[i.isPending&&e.jsx(X,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Center"]})]})]})})]})})}function bs({open:t,onOpenChange:l,center:n,onSuccess:o}){const i=he({resolver:ue(js),defaultValues:{name:n.name,phone:n.phone,student_limit:n.student_limit,teacher_limit:n.teacher_limit,group_limit:n.group_limit,is_paid:n.is_paid}});h.useEffect(()=>{i.reset({name:n.name,phone:n.phone,student_limit:n.student_limit,teacher_limit:n.teacher_limit,group_limit:n.group_limit,is_paid:n.is_paid})},[n,i]);const d=M({mutationFn:a=>D.update(n.id,a),onSuccess:a=>{v.success(`Learning center "${a.name}" updated successfully`),o()},onError:a=>{v.error("Failed to update learning center"),console.error("Update learning center error:",a)}}),r=a=>{d.mutate(a)};return e.jsx(Z,{open:t,onOpenChange:l,children:e.jsxs(Y,{className:"max-w-md",children:[e.jsxs(ee,{children:[e.jsxs(se,{className:"flex items-center space-x-2",children:[e.jsx(F,{className:"h-5 w-5"}),e.jsx("span",{children:"Edit Learning Center"})]}),e.jsxs(ae,{children:['Update the configuration and limits for "',n.name,'".']})]}),e.jsx(de,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(r),className:"space-y-4",children:[e.jsx(g,{control:i.control,name:"name",render:({field:a})=>e.jsxs(j,{children:[e.jsx(f,{children:"Center Name"}),e.jsx(b,{children:e.jsx(w,{placeholder:"ABC Learning Center",...a})}),e.jsx(y,{})]})}),e.jsx(g,{control:i.control,name:"phone",render:({field:a})=>e.jsxs(j,{children:[e.jsx(f,{children:"Phone Number"}),e.jsx(b,{children:e.jsx(w,{placeholder:"+998901234567",...a})}),e.jsx(y,{})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(g,{control:i.control,name:"student_limit",render:({field:a})=>e.jsxs(j,{children:[e.jsx(f,{children:"Students"}),e.jsx(b,{children:e.jsx(w,{type:"number",min:1,...a,onChange:c=>a.onChange(parseInt(c.target.value))})}),e.jsx(y,{})]})}),e.jsx(g,{control:i.control,name:"teacher_limit",render:({field:a})=>e.jsxs(j,{children:[e.jsx(f,{children:"Teachers"}),e.jsx(b,{children:e.jsx(w,{type:"number",min:1,...a,onChange:c=>a.onChange(parseInt(c.target.value))})}),e.jsx(y,{})]})}),e.jsx(g,{control:i.control,name:"group_limit",render:({field:a})=>e.jsxs(j,{children:[e.jsx(f,{children:"Groups"}),e.jsx(b,{children:e.jsx(w,{type:"number",min:1,...a,onChange:c=>a.onChange(parseInt(c.target.value))})}),e.jsx(y,{})]})})]}),e.jsx(g,{control:i.control,name:"is_paid",render:({field:a})=>e.jsxs(j,{className:"flex flex-row items-center justify-between rounded-lg border p-3",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(f,{children:"Paid Subscription"}),e.jsx(me,{children:"Enable paid features for this learning center"})]}),e.jsx(b,{children:e.jsx(ve,{checked:a.value,onCheckedChange:a.onChange})})]})}),e.jsxs(te,{children:[e.jsx(k,{type:"button",variant:"outline",onClick:()=>l(!1),disabled:d.isPending,children:"Cancel"}),e.jsxs(k,{type:"submit",disabled:d.isPending,children:[d.isPending&&e.jsx(X,{className:"mr-2 h-4 w-4 animate-spin"}),"Update Center"]})]})]})})]})})}function vs({open:t,onOpenChange:l,center:n,onSuccess:o}){const[i,d]=h.useState(null),[r,a]=h.useState(null),c=h.useRef(null),x=M({mutationFn:m=>D.uploadLogo(n.id,m),onSuccess:m=>{v.success(m.message),d(null),a(null),o()},onError:m=>{v.error("Failed to upload logo"),console.error("Upload logo error:",m)}}),u=m=>{const s=m.target.files?.[0];if(!s)return;if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(s.type)){v.error("Only JPEG, PNG, and WebP images are allowed");return}if(s.size>5*1024*1024){v.error("File size must be less than 5MB");return}d(s);const T=URL.createObjectURL(s);a(T)},N=()=>{i&&x.mutate(i)},C=()=>{d(null),r&&(URL.revokeObjectURL(r),a(null)),c.current&&(c.current.value="")},p=m=>{m||C(),l(m)};return e.jsx(Z,{open:t,onOpenChange:p,children:e.jsxs(Y,{className:"max-w-md",children:[e.jsxs(ee,{children:[e.jsxs(se,{className:"flex items-center space-x-2",children:[e.jsx(Q,{className:"h-5 w-5"}),e.jsx("span",{children:"Upload Logo"})]}),e.jsxs(ae,{children:['Upload a new logo for "',n.name,'". Supported formats: JPEG, PNG, WebP (max 5MB).']})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-sm font-medium",children:"Current Logo:"}),e.jsxs(J,{className:"h-12 w-12",children:[e.jsx(W,{src:xe(n.logo),alt:n.name}),e.jsx(K,{children:e.jsx(le,{className:"h-6 w-6"})})]})]}),e.jsx("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-6",children:i?e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(J,{className:"h-20 w-20",children:[e.jsx(W,{src:r||void 0,alt:"Preview"}),e.jsx(K,{children:e.jsx(le,{className:"h-8 w-8"})})]}),e.jsx(k,{type:"button",variant:"destructive",size:"sm",className:"absolute -top-2 -right-2 h-6 w-6 rounded-full p-0",onClick:C,children:e.jsx(es,{className:"h-3 w-3"})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium",children:i.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[(i.size/1024/1024).toFixed(2)," MB"]})]})]}):e.jsxs("div",{className:"text-center",children:[e.jsx(Q,{className:"mx-auto h-12 w-12 text-muted-foreground"}),e.jsx("div",{className:"mt-4",children:e.jsx(k,{type:"button",variant:"outline",onClick:()=>c.current?.click(),children:"Choose File"})}),e.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:"JPEG, PNG, WebP up to 5MB"})]})}),e.jsx("input",{ref:c,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:u,className:"hidden"})]}),e.jsxs(te,{children:[e.jsx(k,{type:"button",variant:"outline",onClick:()=>p(!1),disabled:x.isPending,children:"Cancel"}),e.jsxs(k,{type:"button",onClick:N,disabled:!i||x.isPending,children:[x.isPending&&e.jsx(X,{className:"mr-2 h-4 w-4 animate-spin"}),"Upload Logo"]})]})]})})}function Cs(){const[t,l]=h.useState(!1),[n,o]=h.useState(!1),[i,d]=h.useState(!1),[r,a]=h.useState(null),{data:c=[],isLoading:x,refetch:u}=_e({queryKey:["learning-centers"],queryFn:()=>D.list({limit:100})}),N=m=>{a(m),o(!0)},C=m=>{a(m),d(!0)},p=()=>{u(),l(!1),o(!1),d(!1),a(null)};return e.jsxs(e.Fragment,{children:[e.jsxs(Pe,{children:[e.jsx(Te,{links:Ns}),e.jsxs("div",{className:"ms-auto flex items-center space-x-4",children:[e.jsx(Le,{}),e.jsx(De,{}),e.jsx(Fe,{}),e.jsx(Me,{})]})]}),e.jsxs(Ee,{children:[e.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent",children:"Learning Centers"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"Manage all learning centers, their configurations, and operational limits"})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs(k,{onClick:()=>l(!0),size:"lg",className:"bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary/80 shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx(as,{className:"mr-2 h-5 w-5"}),"Add Learning Center"]})})]}),e.jsx(ds,{data:c,isLoading:x,onEdit:N,onUploadLogo:C,onRefresh:u})]}),e.jsx(fs,{open:t,onOpenChange:l,onSuccess:p}),r&&e.jsxs(e.Fragment,{children:[e.jsx(bs,{open:n,onOpenChange:o,center:r,onSuccess:p}),e.jsx(vs,{open:i,onOpenChange:d,center:r,onSuccess:p})]})]})}const Ns=[{title:"Overview",href:"/learning-centers",isActive:!0,disabled:!1},{title:"Analytics",href:"/learning-centers/analytics",isActive:!1,disabled:!0},{title:"Settings",href:"/learning-centers/settings",isActive:!1,disabled:!0}],Us=Cs;export{Us as component};
